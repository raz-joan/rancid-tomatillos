(this["webpackJsonprancid-tomatillos"]=this["webpackJsonprancid-tomatillos"]||[]).push([[0],{17:function(e,t,i){},18:function(e,t,i){},19:function(e,t,i){},21:function(e,t,i){},22:function(e,t,i){},23:function(e,t,i){"use strict";i.r(t);var s=i(0),r=i(12),a=i.n(r),n=(i(17),i(6)),c=i(7),o=i(9),l=i(8),h=(i(18),i(19),i(1)),m=function(e){var t=e.id,i=e.title,s=e.poster;return Object(h.jsx)("img",{className:"image",src:s,alt:i,id:t})},d=(i(21),i(4)),j=function(e){var t=e.movies.map((function(e){return Object(h.jsx)(d.b,{to:"/".concat(e.id),children:Object(h.jsx)(m,{id:e.id,poster:e.poster_path,title:e.title},e.id)},e.id)}));return Object(h.jsx)("div",{className:"movie-container",children:t})},u=(i(22),i(2)),v={fetchInfo:function(e){return fetch("https://rancid-tomatillos.herokuapp.com/api/v2/movies/".concat(e)).then((function(e){if(e.ok)return e.json();throw new Error("Server is down, try again later!")})).catch((function(e){return e}))}},b=function(){var e=Object(u.g)().movieId,t=function(t){Object(o.a)(s,t);var i=Object(l.a)(s);function s(){var t;return Object(n.a)(this,s),(t=i.call(this)).componentDidMount=function(){v.fetchInfo(e).then((function(e){e.movie?t.setState({movie:e.movie,error:""}):t.setState({error:e})})),v.fetchInfo("".concat(e,"/videos")).then((function(e){if(e.videos){var i=e.videos.find((function(e){return"Trailer"===e.type}));i&&t.setState({trailer:i.key,error:""})}else t.setState({error:e})}))},t.state={movie:{id:"",title:"",poster_path:"",release_date:"",average_rating:0,genres:[],overview:"",runtime:""},trailer:"",error:""},t}return Object(c.a)(s,[{key:"render",value:function(){return this.state.error?Object(h.jsx)("h2",{className:"error",children:"404: Movie Not Found"}):this.state.movie.title?Object(h.jsxs)("article",{className:"movie-card-section",children:[Object(h.jsxs)("div",{className:"movie-card-top-section",children:[Object(h.jsx)("div",{className:"movie-card-poster",children:Object(h.jsx)("img",{src:this.state.movie.poster_path,alt:this.state.movie.title})}),Object(h.jsx)("div",{className:"movie-card-info",children:Object(h.jsxs)("article",{className:"movie-info",children:[Object(h.jsx)("h2",{children:this.state.movie.title}),Object(h.jsxs)("p",{className:"sub-detail",children:["Release Date: ",this.state.movie.release_date]}),Object(h.jsxs)("p",{className:"sub-detail",children:["Rating: ",this.state.movie.average_rating.toFixed(1)]}),Object(h.jsxs)("p",{className:"sub-detail",children:["Runtime: ",this.state.movie.runtime," min"]}),Object(h.jsxs)("div",{className:"genre",children:["Genre(s): ",this.state.movie.genres.map((function(e,t){return Object(h.jsx)("p",{children:e},t)}))]}),Object(h.jsx)("p",{className:"summary",children:this.state.movie.overview})]})})]}),Object(h.jsxs)("div",{className:"trailer-section",children:[Object(h.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(this.state.trailer),title:"YouTube video player",frameBorder:"2"}),Object(h.jsx)(d.b,{to:"/",children:Object(h.jsx)("img",{className:"back-img",src:"https://fontmeme.com/permalink/211205/3aa3c3b8f115a7f3c42e0de18d43b8de.png",alt:"return to main page button"})})]})]}):Object(h.jsx)("h2",{className:"loading",children:"LOADING..."})}}]),s}(s.Component);return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(t,{})})},f=function(e){Object(o.a)(i,e);var t=Object(l.a)(i);function i(){var e;return Object(n.a)(this,i),(e=t.call(this)).componentDidMount=function(){v.fetchInfo("").then((function(t){t.movies?e.setState({movies:t.movies,error:""}):e.setState({error:t.message})}))},e.handleChange=function(t){e.setState({search:t.target.value});var i=e.state.movies.filter((function(e){return e.title.toLowerCase().includes("".concat(t.target.value.toLowerCase()))}));e.setState({filteredMovies:i}),t.target.value||e.setState({filteredMovies:[]})},e.clearSearch=function(){e.setState({search:"",filteredMovies:[]})},e.state={movies:[],error:"",search:"",filteredMovies:[]},e}return Object(c.a)(i,[{key:"render",value:function(){var e=this;return this.state.error?Object(h.jsxs)("h2",{className:"error",children:["Oops, something went wrong: '",this.state.error,"'"]}):this.state.movies[0]?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("header",{className:"header",children:[Object(h.jsx)(d.b,{to:"/",children:Object(h.jsx)("img",{className:"title",src:"https://fontmeme.com/permalink/211204/cca36d9d02af58d8feae92729d642f28.png",onClick:function(t){return e.clearSearch()},alt:"Rancid Tomatillos Title"})}),Object(h.jsx)("input",{type:"text",placeholder:"Search by Movie Title",name:"search",value:this.state.search,onChange:function(t){return e.handleChange(t)}})]}),Object(h.jsx)("main",{children:Object(h.jsxs)(u.c,{children:[Object(h.jsx)(u.a,{path:"/",element:Object(h.jsx)(j,{movies:this.state.filteredMovies.length?this.state.filteredMovies:this.state.movies})}),Object(h.jsx)(u.a,{path:"/:movieId",element:Object(h.jsx)(b,{})})]})})]}):Object(h.jsx)("h2",{className:"loading",children:"LOADING..."})}}]),i}(s.Component),O=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,24)).then((function(t){var i=t.getCLS,s=t.getFID,r=t.getFCP,a=t.getLCP,n=t.getTTFB;i(e),s(e),r(e),a(e),n(e)}))};a.a.render(Object(h.jsx)(d.a,{children:Object(h.jsx)(f,{})}),document.getElementById("root")),O()}},[[23,1,2]]]);
//# sourceMappingURL=main.54babe70.chunk.js.map