(this["webpackJsonprancid-tomatillos"]=this["webpackJsonprancid-tomatillos"]||[]).push([[0],{17:function(e,t,i){},18:function(e,t,i){},19:function(e,t,i){},21:function(e,t,i){},22:function(e,t,i){},23:function(e,t,i){"use strict";i.r(t);var s=i(0),r=i.n(s),a=i(12),n=i.n(a),c=(i(17),i(6)),o=i(7),l=i(9),h=i(8),d=(i(18),i(19),i(1)),m=function(e){var t=e.id,i=e.title,s=e.poster;return Object(d.jsx)("img",{className:"image",src:s,alt:i,id:t})},j=(i(21),i(4)),u=function(e){var t=e.movies.map((function(e){return Object(d.jsx)(j.b,{to:"/".concat(e.id),children:Object(d.jsx)(m,{id:e.id,poster:e.poster_path,title:e.title},e.id)},e.id)}));return Object(d.jsx)("div",{className:"movie-container",children:t})},v=(i(22),i(2)),b={fetchInfo:function(e){return fetch("https://rancid-tomatillos.herokuapp.com/api/v2/movies/".concat(e)).then((function(e){if(e.ok)return e.json();throw new Error("Server is down, try again later!")})).catch((function(e){return e}))}},f=function(){var e=Object(v.g)().movieId,t=function(t){Object(l.a)(s,t);var i=Object(h.a)(s);function s(){var t;return Object(c.a)(this,s),(t=i.call(this)).componentDidMount=function(){b.fetchInfo(e).then((function(e){e.movie?t.setState({movie:e.movie,error:""}):t.setState({error:e})})),b.fetchInfo("".concat(e,"/videos")).then((function(e){if(e.videos){var i=e.videos.find((function(e){return"Trailer"===e.type}));i&&t.setState({trailer:i.key,error:""})}else t.setState({error:e})}))},t.state={movie:{id:"",title:"",poster_path:"",release_date:"",average_rating:0,genres:[],overview:"",runtime:""},trailer:"",error:""},t}return Object(o.a)(s,[{key:"render",value:function(){return this.state.error?Object(d.jsx)("h2",{className:"error",children:"404: Movie Not Found"}):this.state.movie.title?Object(d.jsxs)("article",{className:"movie-card-section",children:[Object(d.jsxs)("div",{className:"movie-card-top-section",children:[Object(d.jsx)("div",{className:"movie-card-poster",children:Object(d.jsx)("img",{src:this.state.movie.poster_path,alt:this.state.movie.title})}),Object(d.jsx)("div",{className:"movie-card-info",children:Object(d.jsxs)("article",{className:"movie-info",children:[Object(d.jsx)("h2",{children:this.state.movie.title}),Object(d.jsxs)("p",{className:"sub-detail",children:["Release Date: ",this.state.movie.release_date]}),Object(d.jsxs)("p",{className:"sub-detail",children:["Rating: ",this.state.movie.average_rating.toFixed(1)]}),Object(d.jsxs)("p",{className:"sub-detail",children:["Runtime: ",this.state.movie.runtime," min"]}),Object(d.jsxs)("div",{className:"genre",children:["Genre(s): ",this.state.movie.genres.map((function(e,t){return Object(d.jsx)("p",{children:e},t)}))]}),Object(d.jsx)("p",{className:"summary",children:this.state.movie.overview})]})})]}),Object(d.jsxs)("div",{className:"trailer-section",children:[Object(d.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(this.state.trailer),title:"YouTube video player",frameBorder:"2"}),Object(d.jsx)(j.b,{to:"/",children:Object(d.jsx)("img",{className:"back-img",src:"https://fontmeme.com/permalink/211205/3aa3c3b8f115a7f3c42e0de18d43b8de.png",alt:"return to main page button"})})]})]}):Object(d.jsx)("h2",{className:"loading",children:"LOADING..."})}}]),s}(s.Component);return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(t,{})})},O=function(e){Object(l.a)(i,e);var t=Object(h.a)(i);function i(){var e;return Object(c.a)(this,i),(e=t.call(this)).componentDidMount=function(){b.fetchInfo("").then((function(t){t.movies?e.setState({movies:t.movies,error:""}):e.setState({error:t.message})}))},e.handleChange=function(t){e.setState({search:t.target.value});var i=e.state.movies.filter((function(e){return e.title.toLowerCase().includes("".concat(t.target.value.toLowerCase()))}));e.setState({filteredMovies:i}),t.target.value||e.setState({filteredMovies:[]})},e.clearSearch=function(){e.setState({search:"",filteredMovies:[]})},e.state={movies:[],error:"",search:"",filteredMovies:[]},e}return Object(o.a)(i,[{key:"render",value:function(){var e=this;return this.state.error?Object(d.jsxs)("h2",{className:"error",children:["Oops, something went wrong: '",this.state.error,"'"]}):this.state.movies[0]?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("header",{className:"header",children:[Object(d.jsx)(j.b,{to:"/",children:Object(d.jsx)("img",{className:"title",src:"https://fontmeme.com/permalink/211204/cca36d9d02af58d8feae92729d642f28.png",onClick:function(t){return e.clearSearch()},alt:"Rancid Tomatillos Title"})}),Object(d.jsx)("input",{type:"text",placeholder:"Search by Movie Title",name:"search",value:this.state.search,onChange:function(t){return e.handleChange(t)}})]}),Object(d.jsx)("main",{children:Object(d.jsxs)(v.c,{children:[Object(d.jsx)(v.a,{path:"/",element:Object(d.jsx)(u,{movies:this.state.filteredMovies.length?this.state.filteredMovies:this.state.movies})}),Object(d.jsx)(v.a,{path:"/:movieId",element:Object(d.jsx)(f,{})})]})})]}):Object(d.jsx)("h2",{className:"loading",children:"LOADING..."})}}]),i}(s.Component),p=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,24)).then((function(t){var i=t.getCLS,s=t.getFID,r=t.getFCP,a=t.getLCP,n=t.getTTFB;i(e),s(e),r(e),a(e),n(e)}))};n.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(j.a,{children:Object(d.jsx)(O,{})})}),document.getElementById("root")),p()}},[[23,1,2]]]);
//# sourceMappingURL=main.82d5c391.chunk.js.map